<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1829" height="1808"><desc>title%20Claim%20Flow%0A%0A%0A%0Aactor%20User%0A%0Aentryspacing%200.9%0AUser-%3ENext.JS%3A%20Try%20to%20fetch%20%60%2Fstatus%60%0ANext.JS-%3ERedis%3A%20Query%20%7Bjob%3Aaddress%7D%0ARedis-%3ENext.JS%3A%20Return%20%7Bstate%2C%20txHash%7D%3F%0ANext.JS-%3EUser%3A%20Return%20%7Bstate%2C%20txHash%7D%3F%0Anote%20over%20User%3A%20Assume%20the%20object%20returned%20is%20undefined%0AUser-%3ENext.JS%3A%20Request%20nonce%20for%20challenge%20POST%20%60%2Fchallenge%60%20%7Baddress%7D%0ANext.JS-%3ERedis%3A%20Check%20if%20challenge%20already%20issued%20(if%20it%20is%2C%20try%20to%20fetch%20txHash)%0Anote%20over%20Next.JS%3A%20If%20the%20challenge%20was%20already%20issued%2C%20return%20the%20tx%20hash%20of%20the%20processed%20request%0ANext.JS-%3ENext.JS%3A%20Generate%20random%20challenge%0ANext.JS-%3ERedis%3A%20Store%20challenge%20(%60challenge%3Aaddress%60)%0ANext.JS-%3EUser%3A%20Return%20challenge%20%7Bchallenge%2C%20txHash%3F%7D%0Anote%20over%20User%3A%20If%20txHash%20returned%2C%20start%20polling%20the%20status%0AUser-%3EUser%3A%20Sign%20challenge%0AUser-%3ENext.JS%3A%20POST%20challenge%20to%20%60%2Fclaim%60%20%7Baddress%2C%20sig%7D%0ANext.JS-%3ERedis%3A%20Lookup%20challenge%2C%20ensure%20exists%0ANext.JS-%3ENext.JS%3A%20Verify%20sig%0Anote%20over%20Next.JS%3A%20Server%20has%3A%20address%2C%20challenge%20(assume%20valid)%0ANext.JS-%3ERedis%3A%20Check%20for%20%7Bjob%3Aaddress%7D%20(if%20exists%2C%20return%20it)%0Anote%20over%20Next.JS%3A%20Assume%20%7Bjob%3Aaddress%7D%20does%20not%20exist%20(first%20claim)%0ANext.JS-%3ERedis%3A%20Put%20job%20on%20queue%20(address%2C%20challenge)%0AQueue%20Processor--%3E%3ERedis%3A%20Check%20for%20new%20job%0AQueue%20Processor-%3ERedis%3A%20Fetch%20%7Bjob%3Aaddress%7D%20-%3E%20%7Bstate%3A%20PROCESSING%20%7C%20DONE%20%7C%20ERROR%2C%20txHash%3F%3A%20string%7D%0Anote%20over%20Queue%20Processor%3A%20Assume%20the%20job%20is%20new%0A%0AQueue%20Processor-%3ERedis%3A%20Store%20%7Bjob%3Aaddress%7D%20%7Bstate%3A%20PROCESSING%2C%20txHash%3A%20undefined%7D%0AQueue%20Processor-%3EQueue%20Processor%3A%20Do%20the%20random%20selection%0AQueue%20Processor-%3EQueue%20Processor%3A%20Exeucute%20tx%20to%20claim%2Ftransfer%0AQueue%20Processor-%3ERedis%3A%20Update%20%7Bjob%3Aaddress%7D%20%7Bstate%3A%20PROCESSING%2C%20txHash%3A%20hash%7D%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1829" height="1808"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="860.3458953214845" y="28.27246725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Claim Flow</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 169.44809861269533 148.61893617750002 L 169.44809861269533 1808.2127637525011" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray="14.498701153846154,6.282770500000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 148.61893617750002 L 597.0258143705079 1808.2127637525011" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray="14.498701153846154,6.282770500000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1039.1990196302736 148.61893617750002 L 1039.1990196302736 1808.2127637525011" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray="14.498701153846154,6.282770500000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1609.9693013060548 148.61893617750002 L 1609.9693013060548 1808.2127637525011" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray="14.498701153846154,6.282770500000001"/></g><g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 180.19163616769532 68.89057853250002 A 10.743537555 10.743537555 0 1 1 180.191630795927 68.8798349967356 M 169.44809861269533 79.63411608750002 L 169.44809861269533 102.62905611750003 M 155.87731433269533 87.92737314750002 L 183.01888289269533 87.92737314750002 M 169.44809861269533 102.62905611750003 L 155.87731433269533 124.11613122750002 M 169.44809861269533 102.62905611750003 L 183.01888289269533 124.11613122750002" stroke-miterlimit="10" stroke-width="3.2042129550000005" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="153.97208542910158" y="142.96444272750003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">User</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 550.9132717592188 97.72849512750001 L 643.138356981797 97.72849512750001 L 643.138356981797 148.61893617750002 L 550.9132717592188 148.61893617750002 L 550.9132717592188 97.72849512750001 Z" stroke-miterlimit="10" stroke-width="3.01572984" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="571.3636897367188" y="129.77062467750002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Next.JS</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1000.0084512011134 97.72849512750001 L 1078.3895880594337 97.72849512750001 L 1078.3895880594337 148.61893617750002 L 1000.0084512011134 148.61893617750002 L 1000.0084512011134 97.72849512750001 Z" stroke-miterlimit="10" stroke-width="3.01572984" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1020.4588691786134" y="129.77062467750002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Redis</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1532.4788213778713 97.72849512750001 L 1687.4597812342386 97.72849512750001 L 1687.4597812342386 148.61893617750002 L 1532.4788213778713 148.61893617750002 L 1532.4788213778713 97.72849512750001 Z" stroke-miterlimit="10" stroke-width="3.01572984" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1552.9292393553712" y="129.77062467750002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Queue Processor</text></g></g><g><g><g><rect fill="white" stroke="none" x="315.50637419531256" y="183.48831245250003" width="135.46116459257811" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="318.33362092031257" y="200.45179280250002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Try to fetch `/status`</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 169.44809861269533 207.99111740250004 L 581.5073712355079 207.99111740250004" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(597.0258143705079,207.99111740250004) translate(-597.0258143705079,-207.99111740250004)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 581.3188881205078 200.13765427750005 L 597.0258143705079 207.99111740250004 L 581.3188881205078 215.84458052750003 Z"/></g></g><g><g><rect fill="white" stroke="none" x="750.4963595454102" y="233.43633792750003" width="135.23211490996093" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="753.3236062704102" y="250.39981827750003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Query {job:address}</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 257.93914287750005 L 1023.6805764952736 257.93914287750005" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,257.93914287750005) translate(-1039.1990196302736,-257.93914287750005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1023.4920933802736 250.08567975250006 L 1039.1990196302736 257.93914287750005 L 1023.4920933802736 265.79260600250007 Z"/></g></g><g><g><rect fill="white" stroke="none" x="739.4977862421875" y="283.38436340250007" width="157.22926151640624" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="742.3250329671876" y="300.34784375250007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return {state, txHash}?</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1039.1990196302736 307.88716835250005 L 612.5442575055079 307.88716835250005" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(597.0258143705079,307.88716835250005) translate(-597.0258143705079,-307.88716835250005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 612.7327406205079 300.03370522750004 L 597.0258143705079 307.88716835250005 L 612.7327406205079 315.7406314775001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="304.6223257333985" y="333.3323888775001" width="157.22926151640624" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="307.4495724583985" y="350.2958692275001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return {state, txHash}?</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 357.83519382750006 L 184.96654174769535 357.83519382750006" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(169.44809861269533,357.83519382750006) translate(-169.44809861269533,-357.83519382750006)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 185.15502486269534 349.98173070250004 L 169.44809861269533 357.83519382750006 L 185.15502486269534 365.6886569525001 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 11.854362048828126 383.28041435250003 L 310.07835482656253 383.28041435250003 L 327.04183517656253 400.24389470250003 L 327.04183517656253 426.63153080250004 L 11.854362048828126 426.63153080250004 L 11.854362048828126 383.28041435250003 M 310.07835482656253 383.28041435250003 L 310.07835482656253 400.24389470250003 L 327.04183517656253 400.24389470250003" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="38.241998148828145" y="409.6680504525" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Assume the object returned is undefined</text></g><g><g><rect fill="white" stroke="none" x="191.75193388769537" y="452.07675132750006" width="382.9700452078125" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="194.57918061269538" y="469.04023167750006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Request nonce for challenge POST `/challenge` {address}</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 169.44809861269533 476.57955627750005 L 581.5073712355079 476.57955627750005" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(597.0258143705079,476.57955627750005) translate(-597.0258143705079,-476.57955627750005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 581.3188881205078 468.7260931525 L 597.0258143705079 476.57955627750005 L 581.3188881205078 484.43301940250007 Z"/></g></g><g><g><rect fill="white" stroke="none" x="619.3296496455079" y="502.02477680250007" width="397.56553470976564" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="622.1568963705079" y="518.9882571525001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check if challenge already issued (if it is, try to fetch txHash)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 526.5275817525 L 1023.6805764952736 526.5275817525" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,526.5275817525) translate(-1039.1990196302736,-526.5275817525)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1023.4920933802736 518.6741186275001 L 1039.1990196302736 526.5275817525 L 1023.4920933802736 534.3810448775 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 312.7141670400391 551.9728022775 L 864.3739813509766 551.9728022775 L 881.3374617009766 568.9362826275001 L 881.3374617009766 595.3239187275001 L 312.7141670400391 595.3239187275001 L 312.7141670400391 551.9728022775 M 864.3739813509766 551.9728022775 L 864.3739813509766 568.9362826275001 L 881.3374617009766 568.9362826275001" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="339.1018031400391" y="578.3604383775001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If the challenge was already issued, return the tx hash of the processed request</text></g><g><g><rect fill="white" stroke="none" x="619.3296496455079" y="620.7691392525002" width="187.3938733328125" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="622.1568963705079" y="637.7326196025002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Generate random challenge</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 645.2719442025001 L 672.4190603705079 645.2719442025001 L 672.4190603705079 669.7747491525001 L 612.5442575055079 669.7747491525001" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(597.0258143705079,669.7747491525001) translate(-597.0258143705079,-669.7747491525001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 612.7327406205079 661.9212860275002 L 597.0258143705079 669.7747491525001 L 612.7327406205079 677.6282122775001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="693.0518862788086" y="695.2199696775001" width="250.12106144316405" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="695.8791330038086" y="712.1834500275002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Store challenge (`challenge:address`)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 719.7227746275001 L 1023.6805764952736 719.7227746275001" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,719.7227746275001) translate(-1039.1990196302736,-719.7227746275001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1023.4920933802736 711.8693115025002 L 1039.1990196302736 719.7227746275001 L 1023.4920933802736 727.5762377525001 Z"/></g></g><g><g><rect fill="white" stroke="none" x="255.7139776499024" y="745.1679951525001" width="255.04595768339843" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="258.5412243749024" y="762.1314755025002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return challenge {challenge, txHash?}</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 769.6708001025002 L 184.96654174769535 769.6708001025002" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(169.44809861269533,769.6708001025002) translate(-169.44809861269533,-769.6708001025002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 185.15502486269534 761.8173369775002 L 169.44809861269533 769.6708001025002 L 185.15502486269534 777.5242632275001 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 9.42415575 795.1160206275001 L 312.50856112539066 795.1160206275001 L 329.47204147539065 812.0795009775002 L 329.47204147539065 838.4671370775002 L 9.42415575 838.4671370775002 L 9.42415575 795.1160206275001 M 312.50856112539066 795.1160206275001 L 312.50856112539066 812.0795009775002 L 329.47204147539065 812.0795009775002" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="35.81179185000002" y="821.5036567275002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If txHash returned, start polling the status</text></g><g><g><rect fill="white" stroke="none" x="191.75193388769534" y="863.9123576025003" width="101.83196842558594" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="194.57918061269535" y="880.8758379525003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Sign challenge</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 169.44809861269533 888.4151625525002 L 244.84134461269534 888.4151625525002 L 244.84134461269534 912.9179675025002 L 184.96654174769535 912.9179675025002" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(169.44809861269533,912.9179675025002) translate(-169.44809861269533,-912.9179675025002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 185.15502486269534 905.0645043775003 L 169.44809861269533 912.9179675025002 L 185.15502486269534 920.7714306275002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="246.37253935644537" y="938.3631880275002" width="273.7288342703125" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="249.19978608144538" y="955.3266683775003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">POST challenge to `/claim` {address, sig}</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 169.44809861269533 962.8659929775002 L 581.5073712355079 962.8659929775002" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(597.0258143705079,962.8659929775002) translate(-597.0258143705079,-962.8659929775002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 581.3188881205078 955.0125298525003 L 597.0258143705079 962.8659929775002 L 581.3188881205078 970.7194561025002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="710.5608126704102" y="988.3112135025002" width="215.10320865996093" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="713.3880593954102" y="1005.2746938525003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Lookup challenge, ensure exists</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 1012.8140184525002 L 1023.6805764952736 1012.8140184525002" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,1012.8140184525002) translate(-1039.1990196302736,-1012.8140184525002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1023.4920933802736 1004.9605553275003 L 1039.1990196302736 1012.8140184525002 L 1023.4920933802736 1020.6674815775002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="619.3296496455079" y="1038.2592389775002" width="65.13906681425782" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="622.1568963705079" y="1055.2227193275" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verify sig</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 1062.7620439275004 L 672.4190603705079 1062.7620439275004 L 672.4190603705079 1087.2648488775003 L 612.5442575055079 1087.2648488775003" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(597.0258143705079,1087.2648488775003) translate(-597.0258143705079,-1087.2648488775003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 612.7327406205079 1079.4113857525003 L 597.0258143705079 1087.2648488775003 L 612.7327406205079 1095.1183120025003 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 419.893824022461 1112.7100694025003 L 757.1943243685547 1112.7100694025003 L 774.1578047185548 1129.6735497525003 L 774.1578047185548 1156.0611858525003 L 419.893824022461 1156.0611858525003 L 419.893824022461 1112.7100694025003 M 757.1943243685547 1112.7100694025003 L 757.1943243685547 1129.6735497525003 L 774.1578047185548 1129.6735497525003" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="446.281460122461" y="1139.0977055025" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Server has: address, challenge (assume valid)</text></g><g><g><rect fill="white" stroke="none" x="678.810652453125" y="1181.5064063775005" width="278.60352909453127" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="681.637899178125" y="1198.4698867275004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check for {job:address} (if exists, return it)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 1206.0092113275005 L 1023.6805764952736 1206.0092113275005" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,1206.0092113275005) translate(-1039.1990196302736,-1206.0092113275005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1023.4920933802736 1198.1557482025005 L 1039.1990196302736 1206.0092113275005 L 1023.4920933802736 1213.8626744525004 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 414.19945756738286 1231.4544318525004 L 762.8886908236328 1231.4544318525004 L 779.8521711736329 1248.4179122025005 L 779.8521711736329 1274.8055483025005 L 414.19945756738286 1274.8055483025005 L 414.19945756738286 1231.4544318525004 M 762.8886908236328 1231.4544318525004 L 762.8886908236328 1248.4179122025005 L 779.8521711736329 1248.4179122025005" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="440.5870936673829" y="1257.8420679525002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Assume {job:address} does not exist (first claim)</text></g><g><g><rect fill="white" stroke="none" x="691.4054858271485" y="1300.2507688275007" width="253.41386234648436" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="694.2327325521485" y="1317.2142491775005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Put job on queue (address, challenge)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 597.0258143705079 1324.7535737775006 L 1023.6805764952736 1324.7535737775006" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,1324.7535737775006) translate(-1039.1990196302736,-1324.7535737775006)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1023.4920933802736 1316.9001106525006 L 1039.1990196302736 1324.7535737775006 L 1023.4920933802736 1332.6070369025006 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1263.0883575297853" y="1350.1987943025008" width="122.99160587675782" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1265.9156042547852" y="1367.1622746525006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check for new job</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1609.9693013060548 1374.7015992525007 L 1041.5550585677736 1374.7015992525007" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray="7.5393246000000005"/><g transform="translate(1039.1990196302736,1374.7015992525007) translate(-1039.1990196302736,-1374.7015992525007)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1055.3473785337974 1367.4976790767814 L 1040.964750244369 1374.7015992525007 L 1055.3473785337974 1381.90551942822" stroke-miterlimit="10" stroke-width="1.5706926250000002"/></g></g><g><g><rect fill="white" stroke="none" x="1061.5028549052736" y="1400.146819777501" width="526.1626111257813" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1064.3301016302735" y="1417.1103001275008" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Fetch {job:address} -&gt; {state: PROCESSING | DONE | ERROR, txHash?: string}</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1609.9693013060548 1424.6496247275008 L 1054.7174627652737 1424.6496247275008" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,1424.6496247275008) translate(-1039.1990196302736,-1424.6496247275008)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1054.9059458802735 1416.796161602501 L 1039.1990196302736 1424.6496247275008 L 1054.9059458802735 1432.5030878525008 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1510.2459718466798 1450.0948452525008 L 1692.7291504154298 1450.0948452525008 L 1709.6926307654298 1467.0583256025009 L 1709.6926307654298 1493.4459617025009 L 1510.2459718466798 1493.4459617025009 L 1510.2459718466798 1450.0948452525008 M 1692.7291504154298 1450.0948452525008 L 1692.7291504154298 1467.0583256025009 L 1709.6926307654298 1467.0583256025009" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1536.6336079466798" y="1476.4824813525006" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Assume the job is new</text></g><g><g><rect fill="white" stroke="none" x="1120.4756637431642" y="1518.891182227501" width="408.21699345" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1123.302910468164" y="1535.854662577501" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Store {job:address} {state: PROCESSING, txHash: undefined}</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1609.9693013060548 1543.393987177501 L 1054.7174627652737 1543.393987177501" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,1543.393987177501) translate(-1039.1990196302736,-1543.393987177501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1054.9059458802735 1535.540524052501 L 1039.1990196302736 1543.393987177501 L 1054.9059458802735 1551.247450302501 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1632.2731365810548" y="1568.839207702501" width="164.5592328298828" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1635.1003833060547" y="1585.8026880525008" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Do the random selection</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1609.9693013060548 1593.3420126525011 L 1685.362547306055 1593.3420126525011 L 1685.362547306055 1617.844817602501 L 1625.487744441055 1617.844817602501" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1609.9693013060548,1617.844817602501) translate(-1609.9693013060548,-1617.844817602501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1625.6762275560548 1609.991354477501 L 1609.9693013060548 1617.844817602501 L 1625.6762275560548 1625.698280727501 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1632.2731365810548" y="1643.290038127501" width="190.60787784941405" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1635.1003833060547" y="1660.2535184775008" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Exeucute tx to claim/transfer</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1609.9693013060548 1667.7928430775012 L 1685.362547306055 1667.7928430775012 L 1685.362547306055 1692.295648027501 L 1625.487744441055 1692.295648027501" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1609.9693013060548,1692.295648027501) translate(-1609.9693013060548,-1692.295648027501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1625.6762275560548 1684.4421849025011 L 1609.9693013060548 1692.295648027501 L 1625.6762275560548 1700.149111152501 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1130.665330491211" y="1717.7408685525013" width="387.83765995390627" height="24.50280495"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1133.492577216211" y="1734.7043489025011" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Update {job:address} {state: PROCESSING, txHash: hash}</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1609.9693013060548 1742.2436735025012 L 1054.7174627652737 1742.2436735025012" stroke-miterlimit="10" stroke-width="1.5706926250000002" stroke-dasharray=""/><g transform="translate(1039.1990196302736,1742.2436735025012) translate(-1039.1990196302736,-1742.2436735025012)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1054.9059458802735 1734.3902103775013 L 1039.1990196302736 1742.2436735025012 L 1054.9059458802735 1750.0971366275012 Z"/></g></g></g><g/><g/><g/><g/></g></svg>